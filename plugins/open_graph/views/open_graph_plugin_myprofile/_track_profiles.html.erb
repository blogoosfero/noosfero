<%
  association = "open_graph_#{track}_tracks"
  tracks = profile.send association
  profiles = tracks.map &:object_data
  ids = profiles.map(&:id).join(',')
%>
<%= text_field_tag "#{f.object_name}[open_graph_#{track}_profiles_ids]", '', id: "select-#{track}", placeholder: t("open_graph_plugin.views.track.config.#{track}.search_placeholder") %>

<%= javascript_tag do %>
  $(document).ready(function () {
    open_graph.autocomplete.init(
      <%= url_for(action: "#{track}_search").to_json %>,
      '#select-<%=track%>',
      <%= profiles.map{ |p| {value: p.id, label: render('ac_profile', profile: p), } }.to_json %>
    )
  })
<% end %>
